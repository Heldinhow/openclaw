# Quickstart: Skill Injection System

**Generated**: 2026-02-19

This guide provides a quick overview for developers starting to work on the Skill Injection System.

---

## What is this?

A system that allows the primary agent to explicitly define what tools sub-agents can access through **skills** — named capability packages that define allowed/forbidden tools and composition rules.

---

## Key Concepts

| Concept           | Description                                          |
| ----------------- | ---------------------------------------------------- |
| **Skill**         | A named capability with explicit tool permissions    |
| **SkillRegistry** | In-memory store for registered skills                |
| **ComposedSkill** | Effective permissions from combining multiple skills |
| **Validation**    | Pre-spawn check for skill set correctness            |
| **SkillSelector** | Auto-selects skills based on task context            |

---

## Quick Example

### 1. Register Skills

```typescript
import { SkillRegistry } from "./src/agents/skills/registry.js";
import { codingSkills } from "./src/agents/skills/definitions/index.js";

const registry = new SkillRegistry();

// Register built-in coding skills
for (const skill of codingSkills) {
  registry.registerSkill(skill);
}
```

### 2. Validate Before Spawn

```typescript
const result = registry.validateSkillSet(["specification-engine", "opencode-implementer"]);

if (!result.valid) {
  console.error("Cannot spawn:", result.errors);
  return;
}
```

### 3. Compose for Sub-Agent

```typescript
const composed = registry.composeSkills(["specification-engine", "opencode-implementer"]);

console.log("Allowed tools:", composed.allowed_tools);
// → ["specKit", "opencode-executor"]
console.log("Forbidden:", composed.forbidden_tools);
// → ["write", "edit"]
```

### 4. Use with sessions_spawn

```typescript
// In sessions_spawn tool call
{
  task: "Implement the new feature",
  skills: ["specification-engine", "opencode-implementer"]
}
```

---

## Built-in Skills

| Skill                  | Allowed Tools           | Forbidden Tools     | Requires               |
| ---------------------- | ----------------------- | ------------------- | ---------------------- |
| `specification-engine` | `["specKit"]`           | —                   | `opencode-implementer` |
| `opencode-implementer` | `["opencode-executor"]` | `["write", "edit"]` | `specification-engine` |

---

## File Structure

```
src/agents/skills/
├── types.ts              # Skill, ComposedSkill, ValidationResult types
├── registry.ts           # SkillRegistry class
├── selector.ts           # Context-aware skill selector
├── validation.ts         # Validation logic
└── definitions/
    ├── coding.ts         # Built-in coding skills
    └── index.ts          # Exports

src/agents/
├── tools/
│   └── sessions-spawn-tool.ts   # Modified: skills param
├── subagent-spawn.ts            # Modified: skill validation
└── subagent-announce.ts         # Modified: inject constraints
```

---

## Testing

```bash
# Run tests
pnpm test

# Run specific test file
pnpm test src/agents/skills/registry.test.ts
```

---

## Next Steps

1. **Read the spec**: `specs/001-skill-injection/spec.md`
2. **Read the data model**: `specs/001-skill-injection/data-model.md`
3. **Read the contracts**: `specs/001-skill-injection/contracts/api.md`
4. **Check tasks**: See `tasks.md` (generated by `/speckit.tasks`)
